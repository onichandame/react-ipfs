(this.webpackJsonpexample=this.webpackJsonpexample||[]).push([[0],{1038:function(e,t){},1107:function(e,t){},1129:function(e,t){},1131:function(e,t){},1158:function(e,t){},1329:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(36),o=n.n(c),l=n(1382),u=n(212),i=n(68),s=n(1369),m=n(492),f=n.n(m),b=n(493);"undefined"!==typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!==typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var p=function(e){var t=void 0===e?{external:!1,opts:"http://localhost:5001"}:e,n=t.opts,r=t.external,c=Object(a.useState)(null),o=c[0],l=c[1],u=Object(a.useState)(null),i=u[0],s=u[1];return Object(a.useEffect)((function(){var e=function(){try{return l(null),s(null),Promise.resolve()}catch(e){return Promise.reject(e)}};return e().then((function(){return function(){try{var e=function(e,t){try{var n=e()}catch(a){return t(a)}return n&&n.then?n.then(void 0,t):n}((function(){function e(){console.timeEnd("IPFS Started"),s(null)}r&&!n&&(l(null),s(new Error("daemon address cannot be empty"))),console.time("IPFS Started");var t=function(){if(!r){var e=function(e){l(e)},t=window.ipfs;return t?e(t):Promise.resolve(Object(b.create)({}).then((function(e){try{return window.ipfs=e,Promise.resolve(e.start()).then((function(){return e}))}catch(t){return Promise.reject(t)}}))).then(e)}l(f()(n))}();return t&&t.then?t.then(e):e()}),(function(e){console.error("IPFS init error:",e),l(null),s(e)}));return Promise.resolve(e&&e.then?e.then((function(){})):void 0)}catch(t){return Promise.reject(t)}}()})),function(){e()}}),[r,n]),[o,i]},E=n(1372),d=n(1381),v=n(1),h=n.n(v),x=n(52),j=n(57),O=n(140),w=n(1373),y=n(1330),S=n(1374),g=n(1375),k=n(1376),P=n(1377),C=n(1371),I=n(1385),F=n(1378),T=n(1383),U=function(e){var t=e.fields,n=void 0===t?1:t,c=e.onSubmit,o=e.submit,l=void 0===o?"submit":o,u="number"===typeof n?n:n.length,s=Object(a.useState)((function(){for(var e=[],t=0;t<u;++t)e.push("");return e})),m=Object(i.a)(s,2),f=m[0],b=m[1],p=Object(a.useState)(Object(O.v4)()),E=Object(i.a)(p,1)[0];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),c(f)}},Array.from(new Array(u)).map((function(e,t){return r.a.createElement(T.a,{key:"".concat(E,"-").concat(t),placeholder:Array.isArray(n)?n[t]:"",onChange:function(e){var n=Array.from(f);n[t]=e.currentTarget.value,b(n)}})})),r.a.createElement(C.a,{type:"submit",variant:"contained"},l))},A=new TextEncoder,D=new TextDecoder,W=function(e){var t=e.ipfs,n=Object(u.b)().enqueueSnackbar,c="file-".concat(Object(O.v1)()),o=Object(a.useState)(""),l=Object(i.a)(o,2),s=l[0],m=l[1],f=Object(a.useState)(0),b=Object(i.a)(f,2),p=b[0],d=b[1],v=Object(a.useState)([]),T=Object(i.a)(v,2),W=T[0],B=T[1],z=Object(a.useState)(""),G=Object(i.a)(z,2),J=G[0],N=G[1],R=Object(a.useState)(null),V=Object(i.a)(R,2),q=V[0],M=V[1],$=Object(a.useState)(!1),H=Object(i.a)($,2),K=H[0],L=H[1],Q=Object(a.useCallback)(Object(x.a)(h.a.mark((function e(){var n,a,r,c,o,l,u,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=36;break}n=[],a=!0,r=!1,e.prev=4,o=Object(j.a)(t.files.ls("/"));case 6:return e.next=8,o.next();case 8:return l=e.sent,a=l.done,e.next=12,l.value;case 12:if(u=e.sent,a){e.next=19;break}i=u,n.push({name:i.name,cid:i.cid.toString()});case 16:a=!0,e.next=6;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(4),r=!0,c=e.t0;case 25:if(e.prev=25,e.prev=26,a||null==o.return){e.next=30;break}return e.next=30,o.return();case 30:if(e.prev=30,!r){e.next=33;break}throw c;case 33:return e.finish(30);case 34:return e.finish(25);case 35:B(n);case 36:case"end":return e.stop()}}),e,null,[[4,21,25,35],[26,,30,34]])}))),[t]);Object(a.useEffect)((function(){if(t&&t.id){t.id().then((function(e){m(e.id),Q()}));var e=setInterval(Object(x.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=d,e.next=3,t.swarm.peers();case 3:e.t1=e.sent.length,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)}))),1e3);return function(){clearInterval(e)}}}),[t,Q]);var X=Object(a.useCallback)(function(){var e=Object(x.a)(h.a.mark((function e(n){var a,r,c,o,l,u,i,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!n){e.next=44;break}e.prev=1,a="",r=!0,c=!1,e.prev=5,l=Object(j.a)(t.cat(n));case 7:return e.next=9,l.next();case 9:return u=e.sent,r=u.done,e.next=13,u.value;case 13:if(i=e.sent,r){e.next=21;break}return s=i,a=D.decode(s),e.abrupt("break",21);case 18:r=!0,e.next=7;break;case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(5),c=!0,o=e.t0;case 27:if(e.prev=27,e.prev=28,r||null==l.return){e.next=32;break}return e.next=32,l.return();case 32:if(e.prev=32,!c){e.next=35;break}throw o;case 35:return e.finish(32);case 36:return e.finish(27);case 37:N(a),e.next=43;break;case 40:e.prev=40,e.t1=e.catch(1),N(e.t1.message);case 43:L(!0);case 44:case"end":return e.stop()}}),e,null,[[1,40],[5,23,27,37],[28,,32,36]])})));return function(t){return e.apply(this,arguments)}}(),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{container:!0,direction:"column"},r.a.createElement(E.a,{item:!0},r.a.createElement(w.a,{component:y.a},r.a.createElement(S.a,{size:"small","aria-label":"node info"},r.a.createElement(g.a,null,r.a.createElement(k.a,null,r.a.createElement(P.a,{component:"th",scope:"row"},"ID"),r.a.createElement(P.a,null,s)),r.a.createElement(k.a,null,r.a.createElement(P.a,{component:"th",scope:"row"},"Peers"),r.a.createElement(P.a,null,p)),r.a.createElement(k.a,null,r.a.createElement(P.a,{component:"th",scope:"row"},"Publish"),r.a.createElement(P.a,null,r.a.createElement("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),t&&q&&t.files.write("/".concat(q.name),q,{create:!0}).then(Q)}},r.a.createElement("input",{id:c,style:{display:"none"},type:"file",onChange:function(e){e.preventDefault(),e.currentTarget.files&&e.currentTarget.files.length&&M(e.currentTarget.files[0])}}),r.a.createElement("label",{htmlFor:c},r.a.createElement(C.a,{variant:"text",component:"span"},(null===q||void 0===q?void 0:q.name)||"choose a file")),r.a.createElement(C.a,{type:"submit",variant:"contained"},"submit")))),r.a.createElement(k.a,null,r.a.createElement(P.a,{component:"th",scope:"row"},"Read"),r.a.createElement(P.a,null,r.a.createElement(U,{onSubmit:function(e){return X(e[0])}}))),r.a.createElement(k.a,null,r.a.createElement(P.a,{component:"th",scope:"row"},"Subscribe"),r.a.createElement(P.a,null,r.a.createElement(U,{fields:["topic"],submit:"subscribe",onSubmit:function(){var e=Object(x.a)(h.a.mark((function e(a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.next=3,t.pubsub.subscribe(a[0],(function(e){n("received message ".concat(D.decode(e.data)))}));case 3:n("subscribed to ".concat(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))),r.a.createElement(k.a,null,r.a.createElement(P.a,{component:"th",scope:"row"},"Publish"),r.a.createElement(P.a,null,r.a.createElement(U,{submit:"publish",fields:["topic","message"],onSubmit:function(){var e=Object(x.a)(h.a.mark((function e(a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.next=3,t.pubsub.publish(a[0],A.encode(a[1]));case 3:n("published ".concat(a[1]," to topic ").concat(a[0]));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))),r.a.createElement(k.a,null,r.a.createElement(P.a,{component:"th",scope:"row"},"Files"),r.a.createElement(P.a,null,r.a.createElement(w.a,null,r.a.createElement(S.a,{size:"small","aria-label":"file list ".concat(Object(O.v1)())},r.a.createElement(g.a,null,W.map((function(e){return r.a.createElement(k.a,{key:"file-".concat(Object(O.v1)())},r.a.createElement(P.a,null,e.name),r.a.createElement(P.a,null,e.cid))})))))))))))),r.a.createElement(I.a,{open:K,onClose:function(){return L(!1)}},r.a.createElement(F.a,null,J)))},B=n(1379),z=n(1380),G=n(1386),J=Object(a.createContext)({toggleExternal:function(){},external:!1}),N=Object(a.createContext)({setExternalUrl:function(){},externalUrl:"http://localhost:5001"}),R=Object(a.createContext)({ipfs:null,ipfsErr:null}),V=function(){var e=Object(a.useContext)(N),t=e.externalUrl,n=e.setExternalUrl,c=Object(a.useContext)(J),o=c.external,l=c.toggleExternal,u=Object(a.useContext)(R),i=u.ipfs,s=u.ipfsErr;return r.a.createElement(B.a,{position:"static"},r.a.createElement(z.a,null,r.a.createElement(d.a,{variant:"h6",noWrap:!0},"IPFS"),r.a.createElement("div",{style:{flexGrow:1}}),r.a.createElement(d.a,{variant:"h6",noWrap:!0},o?"External":"Embedded"),r.a.createElement(G.a,{disabled:!i&&!s,value:o,onChange:l}),o&&r.a.createElement(T.a,{disabled:!i&&!s,defaultValue:t,onBlur:function(e){return n(e.currentTarget.value)}})))},q=Object(s.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper}}}));var M=function(){var e=q(),t=Object(a.useState)("http://localhost:5001"),n=Object(i.a)(t,2),c=n[0],o=n[1],l=Object(a.useReducer)((function(e){return!e}),!0),u=Object(i.a)(l,2),s=u[0],m=u[1],f=p({external:s,opts:c}),b=Object(i.a)(f,2),v=b[0],h=b[1];return r.a.createElement(R.Provider,{value:{ipfs:v,ipfsErr:h}},r.a.createElement(N.Provider,{value:{setExternalUrl:o,externalUrl:c}},r.a.createElement(J.Provider,{value:{external:s,toggleExternal:m}},r.a.createElement("div",{className:e.root},r.a.createElement(V,null),r.a.createElement(E.a,{container:!0,spacing:2,direction:"column",alignItems:"center"},r.a.createElement(E.a,{item:!0},r.a.createElement(d.a,{variant:"h5"},"".concat(s?"External":"Embedded"," IPFS Node"))),r.a.createElement(E.a,{item:!0},h&&h.message||v?r.a.createElement(W,{ipfs:v}):"loading"))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,null),r.a.createElement(u.a,{maxSnack:3},r.a.createElement(M,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},236:function(e,t){},504:function(e,t,n){e.exports=n(1329)},535:function(e,t){},720:function(e,t){},746:function(e,t){},747:function(e,t){},813:function(e,t){},815:function(e,t){},871:function(e,t){},929:function(e,t){},938:function(e,t){},940:function(e,t){}},[[504,1,2]]]);
//# sourceMappingURL=main.75c3e01e.chunk.js.map