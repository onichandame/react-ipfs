(this.webpackJsonpexample=this.webpackJsonpexample||[]).push([[0],{1028:function(e,t){},1056:function(e,t){},1058:function(e,t){},1086:function(e,t){},1260:function(e,t){},1388:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(37),l=a.n(c),o=a(1441),u=a(207),i=a(39),s=a(1428),m=a(488),f=a(1431),b=a(1440),p=a(0),E=a.n(p),v=a(19),d=a(55),h=a(137),x=a(1432),j=a(1389),O=a(1433),g=a(1434),w=a(1435),k=a(1436),S=a(1430),y=a(1444),C=a(1437),I=a(1442),P=function(e){var t=e.fields,a=void 0===t?1:t,c=e.onSubmit,l=e.submit,o=void 0===l?"submit":l,u="number"===typeof a?a:a.length,s=Object(n.useState)((function(){for(var e=[],t=0;t<u;++t)e.push("");return e})),m=Object(i.a)(s,2),f=m[0],b=m[1],p=Object(n.useState)(Object(h.v4)()),E=Object(i.a)(p,1)[0];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),c(f)}},Array.from(new Array(u)).map((function(e,t){return r.a.createElement(I.a,{key:"".concat(E,"-").concat(t),placeholder:Array.isArray(a)?a[t]:"",onChange:function(e){var a=Array.from(f);a[t]=e.currentTarget.value,b(a)}})})),r.a.createElement(S.a,{type:"submit",variant:"contained"},o))},T=new TextEncoder,F=new TextDecoder,U=function(e){var t=e.ipfs,a=Object(u.b)().enqueueSnackbar,c="file-".concat(Object(h.v1)()),l=Object(n.useState)(""),o=Object(i.a)(l,2),s=o[0],m=o[1],b=Object(n.useState)(0),p=Object(i.a)(b,2),I=p[0],U=p[1],A=Object(n.useState)([]),D=Object(i.a)(A,2),W=D[0],B=D[1],z=Object(n.useState)(""),G=Object(i.a)(z,2),J=G[0],N=G[1],R=Object(n.useState)(null),V=Object(i.a)(R,2),q=V[0],M=V[1],$=Object(n.useState)(!1),H=Object(i.a)($,2),K=H[0],L=H[1],Q=Object(n.useCallback)(Object(v.a)(E.a.mark((function e(){var a,n,r,c,l,o,u,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=36;break}a=[],n=!0,r=!1,e.prev=4,l=Object(d.a)(t.files.ls("/"));case 6:return e.next=8,l.next();case 8:return o=e.sent,n=o.done,e.next=12,o.value;case 12:if(u=e.sent,n){e.next=19;break}i=u,a.push({name:i.name,cid:i.cid.toString()});case 16:n=!0,e.next=6;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(4),r=!0,c=e.t0;case 25:if(e.prev=25,e.prev=26,n||null==l.return){e.next=30;break}return e.next=30,l.return();case 30:if(e.prev=30,!r){e.next=33;break}throw c;case 33:return e.finish(30);case 34:return e.finish(25);case 35:B(a);case 36:case"end":return e.stop()}}),e,null,[[4,21,25,35],[26,,30,34]])}))),[t]);Object(n.useEffect)((function(){if(t&&t.id){t.id().then((function(e){m(e.id),Q()}));var e=setInterval(Object(v.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=U,e.next=3,t.swarm.peers();case 3:e.t1=e.sent.length,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)}))),1e3);return function(){clearInterval(e)}}}),[t,Q]);var X=Object(n.useCallback)(function(){var e=Object(v.a)(E.a.mark((function e(a){var n,r,c,l,o,u,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!a){e.next=44;break}e.prev=1,n="",r=!0,c=!1,e.prev=5,o=Object(d.a)(t.cat(a));case 7:return e.next=9,o.next();case 9:return u=e.sent,r=u.done,e.next=13,u.value;case 13:if(i=e.sent,r){e.next=21;break}return n=i.toString(),e.abrupt("break",21);case 18:r=!0,e.next=7;break;case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(5),c=!0,l=e.t0;case 27:if(e.prev=27,e.prev=28,r||null==o.return){e.next=32;break}return e.next=32,o.return();case 32:if(e.prev=32,!c){e.next=35;break}throw l;case 35:return e.finish(32);case 36:return e.finish(27);case 37:N(n),e.next=43;break;case 40:e.prev=40,e.t1=e.catch(1),N(e.t1.message);case 43:L(!0);case 44:case"end":return e.stop()}}),e,null,[[1,40],[5,23,27,37],[28,,32,36]])})));return function(t){return e.apply(this,arguments)}}(),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{container:!0,direction:"column"},r.a.createElement(f.a,{item:!0},r.a.createElement(x.a,{component:j.a},r.a.createElement(O.a,{size:"small","aria-label":"node info"},r.a.createElement(g.a,null,r.a.createElement(w.a,null,r.a.createElement(k.a,{component:"th",scope:"row"},"ID"),r.a.createElement(k.a,null,s)),r.a.createElement(w.a,null,r.a.createElement(k.a,{component:"th",scope:"row"},"Peers"),r.a.createElement(k.a,null,I)),r.a.createElement(w.a,null,r.a.createElement(k.a,{component:"th",scope:"row"},"Publish"),r.a.createElement(k.a,null,r.a.createElement("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),t&&q&&t.files.write("/".concat(q.name),q,{create:!0}).then(Q)}},r.a.createElement("input",{id:c,style:{display:"none"},type:"file",onChange:function(e){e.preventDefault(),e.currentTarget.files&&e.currentTarget.files.length&&M(e.currentTarget.files[0])}}),r.a.createElement("label",{htmlFor:c},r.a.createElement(S.a,{variant:"text",component:"span"},(null===q||void 0===q?void 0:q.name)||"choose a file")),r.a.createElement(S.a,{type:"submit",variant:"contained"},"submit")))),r.a.createElement(w.a,null,r.a.createElement(k.a,{component:"th",scope:"row"},"Read"),r.a.createElement(k.a,null,r.a.createElement(P,{onSubmit:function(e){return X(e[0])}}))),r.a.createElement(w.a,null,r.a.createElement(k.a,{component:"th",scope:"row"},"Subscribe"),r.a.createElement(k.a,null,r.a.createElement(P,{fields:["topic"],submit:"subscribe",onSubmit:function(){var e=Object(v.a)(E.a.mark((function e(n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.next=3,t.pubsub.subscribe(n[0],(function(e){a("received message ".concat(F.decode(e.data)))}));case 3:a("subscribed to ".concat(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))),r.a.createElement(w.a,null,r.a.createElement(k.a,{component:"th",scope:"row"},"Publish"),r.a.createElement(k.a,null,r.a.createElement(P,{submit:"publish",fields:["topic","message"],onSubmit:function(){var e=Object(v.a)(E.a.mark((function e(n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.next=3,t.pubsub.publish(n[0],T.encode(n[1]));case 3:a("published ".concat(n[1]," to topic ").concat(n[0]));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))),r.a.createElement(w.a,null,r.a.createElement(k.a,{component:"th",scope:"row"},"Files"),r.a.createElement(k.a,null,r.a.createElement(x.a,null,r.a.createElement(O.a,{size:"small","aria-label":"file list ".concat(Object(h.v1)())},r.a.createElement(g.a,null,W.map((function(e){return r.a.createElement(w.a,{key:"file-".concat(Object(h.v1)())},r.a.createElement(k.a,null,e.name),r.a.createElement(k.a,null,e.cid))})))))))))))),r.a.createElement(y.a,{open:K,onClose:function(){return L(!1)}},r.a.createElement(C.a,null,J)))},A=a(1438),D=a(1439),W=a(1445),B=Object(n.createContext)({toggleExternal:function(){},external:!1}),z=Object(n.createContext)({setExternalUrl:function(){},externalUrl:"http://localhost:5001"}),G=function(){var e=Object(n.useContext)(z),t=e.externalUrl,a=e.setExternalUrl,c=Object(n.useContext)(B),l=c.external,o=c.toggleExternal;return r.a.createElement(A.a,{position:"static"},r.a.createElement(D.a,null,r.a.createElement(b.a,{variant:"h6",noWrap:!0},"IPFS"),r.a.createElement("div",{style:{flexGrow:1}}),r.a.createElement(b.a,{variant:"h6",noWrap:!0},l?"External":"Embedded"),r.a.createElement(W.a,{value:l,onChange:o}),l&&r.a.createElement(I.a,{defaultValue:t,onBlur:function(e){return a(e.currentTarget.value)}})))},J=Object(s.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper}}}));var N=function(){var e=J(),t=Object(n.useState)("http://localhost:5001"),a=Object(i.a)(t,2),c=a[0],l=a[1],o=Object(n.useReducer)((function(e){return!e}),!0),u=Object(i.a)(o,2),s=u[0],p=u[1],E=Object(m.a)({external:s,opts:c}),v=Object(i.a)(E,2),d=v[0],h=v[1];return r.a.createElement(z.Provider,{value:{setExternalUrl:l,externalUrl:c}},r.a.createElement(B.Provider,{value:{external:s,toggleExternal:p}},r.a.createElement("div",{className:e.root},r.a.createElement(G,null),r.a.createElement(f.a,{container:!0,spacing:2,direction:"column",alignItems:"center"},r.a.createElement(f.a,{item:!0},r.a.createElement(b.a,{variant:"h5"},"".concat(s?"External":"Embedded"," IPFS Node"))),r.a.createElement(f.a,{item:!0},h&&h.message||r.a.createElement(U,{ipfs:d}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,null),r.a.createElement(u.a,{maxSnack:3},r.a.createElement(N,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},217:function(e,t){},502:function(e,t,a){e.exports=a(1388)},516:function(e,t){},588:function(e,t){},589:function(e,t){},771:function(e,t){},810:function(e,t){},819:function(e,t){},821:function(e,t){},959:function(e,t){}},[[502,1,2]]]);
//# sourceMappingURL=main.6e1a787a.chunk.js.map